@{
    ViewBag.Title = "New search";
}


@section scripts
{
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>

    <script>
        $(document).ready(function () {
            $('.js-example-basic-multiple').select2({
                minimumInputLength: 1,
                tags: true,
                dataType: 'json',
                //tokenSeparators: [' '],
                ajax: {
                    delay: 250,
                    url: function (params) {
                        return '/newsearch/search/' + params.term;
                    },
                    processResults: function (data) {
                        // Transforms the top-level key of the response object from 'items' to 'results'
                        return {
                            results: $.map(data, function (obj) {
                                obj.id = obj.id || obj.Ico;
                                obj.text = obj.text || obj.Name;
                                return obj;
                            })
                        };
                    }
                },
                
            });

            //submit behaviour
            $("#search-input").on('submit', function (e) {
                var searchval = $('.js-example-basic-multiple').val().join(' ');
                
                $('.js-example-basic-multiple').val("");
                $('#query-data').val(searchval);

            });
        });
    </script>
    
}

@section breadcrumb
{
    <ol class="breadcrumb">
        <li><a href="/">Hlídač Státu</a></li>
        <li class="active">@ViewBag.Title</li>
    </ol>
}

<h1>Nové hledání</h1>
<p>Tato stránka zatím funguje pro testování nové funkcionality pro našeptávání.</p>

<div>

    <form id="search-input">
        <select class="js-example-basic-multiple" name="query" multiple="multiple" style="width: 75%">
        </select>
        <input id="query-data" name="q" type="hidden" />
        <button formaction="">hledat</button>
    </form>



</div>